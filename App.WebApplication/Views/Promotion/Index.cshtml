@using App.API.Infrastructure.ViewModels.Catalog.Promotion
@using Data.Entities
@model PromotionAddRequest

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Index";
    var lst = ViewData["lst"] as List<Promotion>;
    int i = 0;
}

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<h1 class="mt-2">Khuyến mãi</h1>

<ol class="breadcrumb mb-4">
    <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Home</a></li>
    <li class="breadcrumb-item active">Danh Mục khuyến mãi</li>
</ol>

<div class="row border-1 shadow p-3 mb-5 bg-light rounded m-2">

    @if (ViewBag.message != null)
    {
                 <script>
                       swal("Success","", "success");
                 </script>
    }

    <div class="col-3">
        <form asp-action="Add" method="post">

            <div class="form-floating mb-3">
                <input type="text" asp-for="Name" class="form-control" id="floatingInput" placeholder="Tên">
                <label for="floatingInput">Tên</label>
              <span class="text-danger" asp-validation-for="Name"></span>
            </div>

             <div class="form-floating mb-3">
              <input type="date" asp-for="FromDate" class="form-control" id="floatingInput" placeholder="Ngày bắt đầu">
                <label for="floatingInput">Ngày bắt đầu</label>
              <span class="text-danger" asp-validation-for="FromDate"></span>
            </div>

             <div class="form-floating mb-3">
              <input type="date" asp-for="ToDate" class="form-control" id="floatingInput" placeholder="Ngày kết thúc">
                <label for="floatingInput">Ngày kết thúc</label>
              <span class="text-danger" asp-validation-for="ToDate"></span>
            </div>

            <div class="form-floating mb-3">
              <input type="number" asp-for="DiscountAmount" class="form-control" id="floatingInput" placeholder="Mức giảm">
                <label for="floatingInput">Mức giảm</label>
              <span class="text-danger" asp-validation-for="DiscountAmount"></span>
            </div>

            <div class="form-floating mb-3">
              <input type="number" asp-for="DiscountPercent" class="form-control" id="floatingInput" placeholder="Phần trăm triết khấu">
                <label for="floatingInput">Phần trăm triết khấu</label>
              <span class="text-danger" asp-validation-for="DiscountPercent"></span>
            </div>

             <div class="form-floating mb-3">
              <input type="text" asp-for="ProductCategoryIds" class="form-control" id="floatingInput" placeholder="Danh mục sản phẩm">
                <label for="floatingInput">Danh mục sản phẩm</label>
              <span class="text-danger" asp-validation-for="ProductCategoryIds"></span>
            </div>

             <div class="form-floating mb-3">
              <input type="text" asp-for="ProductIds" class="form-control" id="floatingInput" placeholder="Sản Phẩm">
                <label for="floatingInput">Sản Phẩm</label>
              <span class="text-danger" asp-validation-for="ProductIds"></span>
            </div>

             <div class="mb-3">
              <input type="checkbox" asp-for="ApplyForAll">
            </div>

            <div>
                <button type="submit" class="btn btn-success">Thêm</button>
            </div>

        </form>
    </div>

     <div class="col-9">
         <table class="table table-bordered table-hover">

             <thead>
                 <tr>
                     <th>#</th>
                     <th>Tên</th>
                     <th>Ngày bắt đầu</th>
                     <th>Ngày kết thúc</th>
                     <th>Mức giảm</th>
                     <th>Phần trăm triết khấu</th>
                     <th>Sản phẩm</th>
                     <th>Danh mục sản phẩm</th>
                     <th colspan="2">Thao tác</th>
                 </tr>
             </thead>

             <tbody>
                @foreach (var x in lst)
                {
                                        <tr>
                                            <td>@(++i)</td>
                                            <td>@x.Name</td>
                                            <td>@x.FromDate</td>
                                            <td>@x.ToDate</td>
                                            <td>@x.DiscountAmount</td>
                                            <td>@x.DiscountPercent</td>
                                            <td>@x.ProductIds</td>
                                            <td>@x.ProductCategoryIds</td>
                                            <td><a asp-action="Delete" asp-route-id="@x.Id" class="btn btn-danger mb-3">Xóa</a> <a asp-action="Edit" asp-route-id="@x.Id" class="btn btn-primary">Sửa</a></td>
                                        </tr>
                }
             </tbody>

         </table>
    </div>

</div>



